<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>CSS3瀑布流</title>
    <style>
        body {
            margin: 0;
        }
        /*大层*/
        .container{width:100%;margin: 0 auto;}
        /*瀑布流层*/
        .waterfall{
            position: relative;
            width: 100%;
        }
        .waterfall:after, .container:after {
            zoom: 1;
            display: block;
            content: '';
            clear: both;
        }
        /*一个内容层*/
        .item{
            border: 1px solid #000;
            position: absolute;
            width: 275px;
        }
        .item img{
            width: 100%;
            margin-bottom:10px;
        }
    </style>
</head>
<body>
<div class="container">
    <div class="waterfall">
        <div class="item hei">
            <img src="https://imgsa.baidu.com/baike/c0%3Dbaike72%2C5%2C5%2C72%2C24/sign=f3d4063328738bd4d02cba63c0e2ecb3/a2cc7cd98d1001e910616de1be0e7bec55e797fa.jpg">
            <p>1 convallis timestamp</p>
        </div>
        <div class="item">
            <img src="https://imgsa.baidu.com/baike/c0%3Dbaike92%2C5%2C5%2C92%2C30/sign=03948ea9b4315c60579863bdecd8a076/8326cffc1e178a825a6b5d1cfe03738da977e833.jpg">
            <p>2 convallis timestamp 2 Donec a fermentum nisi. </p>
            <p>3 convallis timestamp 2 Donec a fermentum nisi. </p>
            <p>4 convallis timestamp 2 Donec a fermentum nisi. </p>
        </div>
        <div class="item">
            <img src="https://imgsa.baidu.com/baike/c0%3Dbaike92%2C5%2C5%2C92%2C30/sign=03948ea9b4315c60579863bdecd8a076/8326cffc1e178a825a6b5d1cfe03738da977e833.jpg">
            <p>2 convallis timestamp 2 Donec a fermentum nisi. </p>
        </div>
        <div class="item">
            <img src="https://imgsa.baidu.com/baike/c0%3Dbaike92%2C5%2C5%2C92%2C30/sign=03948ea9b4315c60579863bdecd8a076/8326cffc1e178a825a6b5d1cfe03738da977e833.jpg">
            <p>2 convallis timestamp 2 Donec a fermentum nisi. </p>
        </div>
        <div class="item">
            <img src="https://imgsa.baidu.com/baike/c0%3Dbaike80%2C5%2C5%2C80%2C26/sign=3d645bf2d0ca7bcb6976cf7ddf600006/6d81800a19d8bc3efe5f64fb858ba61ea8d345af.jpg">
            <p>3 Nullam eget lectus augue. Donec eu sem sit amet ligula
                faucibus suscipit. Suspendisse rutrum turpis quis nunc
                convallis quis aliquam mauris suscipit.</p>
            <p>3 Nullam eget lectus augue. Donec eu sem sit amet ligula
                faucibus suscipit. Suspendisse rutrum turpis quis nunc
                convallis quis aliquam mauris suscipit.</p>
        </div>
        <div class="item">
            <img src="https://imgsa.baidu.com/baike/c0%3Dbaike180%2C5%2C5%2C180%2C60/sign=fbc3501b0a087bf469e15fbb93ba3c49/bf096b63f6246b60ea65dd24e3f81a4c510fa273.jpg">
            <p> 4 Donec a fermentum nisi. Integer dolor est, commodo ut
                sagittis vitae, egestas at augue. </p>
        </div>
        <div class="item">
            <img src="https://imgsa.baidu.com/baike/c0%3Dbaike150%2C5%2C5%2C150%2C50/sign=9fe1d71697ef76c6c4dff379fc7f969f/b03533fa828ba61ed2efcd184634970a304e5987.jpg">
            <p> 5 Donec a fermentum nisi. Integer dolor est, commodo ut sagittis vitae, egestas at augue.</p>
        </div>
        <div class="item">
            <img src="https://imgsa.baidu.com/baike/c0%3Dbaike72%2C5%2C5%2C72%2C24/sign=f3d4063328738bd4d02cba63c0e2ecb3/a2cc7cd98d1001e910616de1be0e7bec55e797fa.jpg">
            <p>1 convallis timestamp</p>
        </div>
        <div class="item">
            <img src="https://imgsa.baidu.com/baike/c0%3Dbaike92%2C5%2C5%2C92%2C30/sign=03948ea9b4315c60579863bdecd8a076/8326cffc1e178a825a6b5d1cfe03738da977e833.jpg">
            <p>2 convallis timestamp 2 Donec a fermentum nisi. </p>
            <p>3 convallis timestamp 2 Donec a fermentum nisi. </p>
            <p>4 convallis timestamp 2 Donec a fermentum nisi. </p>
        </div>
        <div class="item">
            <img src="https://imgsa.baidu.com/baike/c0%3Dbaike92%2C5%2C5%2C92%2C30/sign=03948ea9b4315c60579863bdecd8a076/8326cffc1e178a825a6b5d1cfe03738da977e833.jpg">
            <p>2 convallis timestamp 2 Donec a fermentum nisi. </p>
        </div>
        <div class="item">
            <img src="https://imgsa.baidu.com/baike/c0%3Dbaike92%2C5%2C5%2C92%2C30/sign=03948ea9b4315c60579863bdecd8a076/8326cffc1e178a825a6b5d1cfe03738da977e833.jpg">
            <p>2 convallis timestamp 2 Donec a fermentum nisi. </p>
        </div>
        <div class="item">
            <img src="https://imgsa.baidu.com/baike/c0%3Dbaike80%2C5%2C5%2C80%2C26/sign=3d645bf2d0ca7bcb6976cf7ddf600006/6d81800a19d8bc3efe5f64fb858ba61ea8d345af.jpg">
            <p>3 Nullam eget lectus augue. Donec eu sem sit amet ligula
                faucibus suscipit. Suspendisse rutrum turpis quis nunc
                convallis quis aliquam mauris suscipit.</p>
            <p>3 Nullam eget lectus augue. Donec eu sem sit amet ligula
                faucibus suscipit. Suspendisse rutrum turpis quis nunc
                convallis quis aliquam mauris suscipit.</p>
        </div>
        <div class="item">
            <img src="https://imgsa.baidu.com/baike/c0%3Dbaike180%2C5%2C5%2C180%2C60/sign=fbc3501b0a087bf469e15fbb93ba3c49/bf096b63f6246b60ea65dd24e3f81a4c510fa273.jpg">
            <p> 4 Donec a fermentum nisi. Integer dolor est, commodo ut
                sagittis vitae, egestas at augue. </p>
        </div>
        <div class="item">
            <img src="https://imgsa.baidu.com/baike/c0%3Dbaike150%2C5%2C5%2C150%2C50/sign=9fe1d71697ef76c6c4dff379fc7f969f/b03533fa828ba61ed2efcd184634970a304e5987.jpg">
            <p> 5 Donec a fermentum nisi. Integer dolor est, commodo ut sagittis vitae, egestas at augue.</p>
        </div>
    </div>
</div>
<script src="lib/js/jquery.js"></script>
<script>
    window.onload = function(){
        var cols = 5;                               // 列的数量\5
        var $item = $('.item');                     // 子内容获取
        var itemLength = $item.length;              // 子内容长度\数量
        var itemWidth = $item.width();              // 子内容宽度
        var rows = Math.ceil(itemLength / cols);       // 行的数量\3
        for(var i = 1; i <= rows; i ++){
            for(var j = (cols * i - cols); j < (itemLengths = ((cols * i > itemLength) ? itemLength : cols * i)); j ++){
                console.log(j - cols * i + cols);
                $item.eq(j).css({'left': (j - cols * i + cols) * (itemWidth + 20) + 'px',
                    'top': function(){
                        var couts = 0;                              // 基数
                        var coutAdd;
                        for(var k = 1; k < i; k ++){
                            coutAdd =$('.item').eq(j - k * cols).height() + 20;
                            couts += coutAdd;
                           // console.log(couts);
                           // console.log(coutAdd);
                        }
                        return couts;
                    }
                })
            }
        }
    }
</script>
</body>
</html>